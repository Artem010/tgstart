{% extends 'baselk.html' %}
{% load static %}

{% block title %}Личный кабинет{% endblock %}

{% block head%}

{%endblock%}


{%block mainContent%}
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Панель управления</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            {%if cBot%}
              {{cBot.bot_name}}
            {%else%}
              Выберите бота
            {%endif%}
          </button>
          <div class="text-truncate dropdown-menu" aria-labelledby="dropdownMenuButton">
            {%for b in tgBots reversed %}

            <a class="dropdown-item" href="?botID={{b.id}}">{{b.bot_name}}</a>
            {%endfor%}
          </div>

        </div>
      </div>


        <div class="row justify-content">
          <div class="col-md-6"><canvas class="my-4 w-100" id="myChart" >Your browser does not support the canvas element.</canvas></div>
          <div class="col-md-6"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Doloremque officia quo et, debitis ut dignissimos earum tenetur sapiente quam perferendis ullam aspernatur distinctio doloribus vero facilis molestias, porro excepturi quas iusto ducimus odio veritatis aperiam. Perferendis impedit voluptas magni tempora debitis eaque aspernatur illum officia. Iusto architecto, minima culpa tenetur eius repudiandae animi, quos harum impedit itaque ipsam, fugit quaerat ab sunt odio iste voluptatibus inventore at minus numquam, atque illum. Dicta amet tempora, quos libero? Corporis molestias dolorum ullam obcaecati, placeat non pariatur, harum maxime sit voluptates labore similique nam iste sint, vero culpa nisi. Laudantium at cupiditate tempore voluptas a ipsum quas! Blanditiis dicta quia ut quos reprehenderit, unde, molestias cupiditate quasi fugiat nisi eum laborum! Unde, laborum, porro! Ad, porro ea numquam atque quidem nisi fugit minus vero similique, amet quis a nostrum inventore autem, consequuntur, reiciendis neque debitis culpa voluptas molestiae. Voluptate vero id voluptatem excepturi ex a architecto similique et reiciendis consequuntur ea soluta doloremque reprehenderit nihil odit veritatis, illum earum sequi nulla necessitatibus ab, tempora. Libero dignissimos aspernatur suscipit voluptatem non nam rem, et doloremque debitis maiores. Officiis dicta quasi voluptate magni autem odit, praesentium molestiae eveniet obcaecati inventore, officia laborum culpa dolor excepturi.</p></div>
        </div>



    </main>
{% endblock %}


{%block footerScripts%}
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>

    <script>
    /* globals Chart:false, feather:false */

      (function () {
      'use strict'

      // console.log($('#stat').text())

      {%if not dataChart == '0' %}
        let statMSGS = [
        {%for i in dataChart%}
            '{{i.count}}',
        {%endfor%}
        ]
        let labelsMSGS = [
        {%for i in dataChart%}
            '{{i.date}}',
        {%endfor%}
        ]
      {%endif%}
      // console.log(statMSGS)

      // Graphs
      var ctx = document.getElementById('myChart')
      // eslint-disable-next-line no-unused-vars
      var myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labelsMSGS,
          datasets: [{
            data: statMSGS,
            lineTension: 0,
            backgroundColor: 'transparent',
            borderColor: '#007bff',
            borderWidth: 4,
            pointBackgroundColor: '#007bff'
          }]
        },
        options: {
          responsive: true,
          tooltips: {
  					mode: 'index',
  					intersect: false,
  				},
          scales: {
            xAxes: [{
  						display: true,
  						scaleLabel: {
  							display: true,
  							labelString: 'Дата'
  						}
  					}],
  					yAxes: [{
  						display: true,
  						scaleLabel: {
  							display: true,
  							labelString: 'Кол-во сообщений'
  						}
  					}]
          },
          legend: {
            display: false
          }
        }
      })
      })()

    </script>


{% endblock %}
